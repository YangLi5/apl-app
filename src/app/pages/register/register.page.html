<ion-header>
  <ion-toolbar color="warning">
  	<ion-buttons slot="start">
		  <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Create New Account</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div>
  	<ion-img class="logo" src="assets/images/logo.png"></ion-img>
  	<p class="regis_intro">
      Welcome apple explorers! Thank you for taking the time to help us map and measure apple trees in your community. While you do not need to be an expert field biologist to help us collect this information, we do need to have your contact information in case we need further information about particular trees. Your email and user name will always remain private. At the end of this survey you will have the option to share the data you collect with the Montezuma Orchard Restoration Project and the Fruit RegisTREE. 
    </p>
  </div>
	<br />


  <form [formGroup]="validations_form" (ngSubmit)="onSubmit(validations_form.value)">

    <ion-item class="input-box">
      <ion-label position="floating" color="primary">Username</ion-label>
      <ion-input type="text" formControlName="username"></ion-input>
    </ion-item>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.username">
        <div class="error-message" *ngIf="validations_form.get('username').hasError(validation.type) && (validations_form.get('username').dirty || validations_form.get('username').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>
  	
  	<ion-item class="input-box">
      <ion-label position="floating" color="primary">Email</ion-label>
      <ion-input type="text" formControlName="email"></ion-input>
    </ion-item>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.email">
        <div class="error-message" *ngIf="validations_form.get('email').hasError(validation.type) && (validations_form.get('email').dirty || validations_form.get('email').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>
    
    <div formGroupName="matching_passwords">
      <ion-item class="input-box">
        <ion-label position="floating" color="primary">Password</ion-label>
        <ion-input type="password" formControlName="password"></ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validation_messages.password">
          <div class="error-message" *ngIf="validations_form.get('matching_passwords').get('password').hasError(validation.type) && (validations_form.get('matching_passwords').get('password').dirty || validations_form.get('matching_passwords').get('password').touched)">
            <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
          </div>
        </ng-container>
      </div>

    	<ion-item class="input-box">
        <ion-label position="floating" color="primary">Comfirm Password</ion-label>
        <ion-input type="password" formControlName="confirm_password"></ion-input>
      </ion-item>
      <div class="validation-errors">
        <ng-container *ngFor="let validation of validation_messages.confirm_password">
          <div class="error-message" *ngIf="validations_form.get('matching_passwords').get('confirm_password').hasError(validation.type) && (validations_form.get('matching_passwords').get('confirm_password').dirty || validations_form.get('matching_passwords').get('confirm_password').touched)">
            <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
          </div>
        </ng-container>
      </div>
    </div>
    <div class="validation-errors">
      <ng-container *ngFor="let validation of validation_messages.matching_passwords">
        <div class="error-message" *ngIf="validations_form.get('matching_passwords').hasError(validation.type) && (validations_form.get('matching_passwords').get('confirm_password').dirty || validations_form.get('matching_passwords').get('confirm_password').touched)">
          <ion-icon name="information-circle-outline"></ion-icon> {{ validation.message }}
        </div>
      </ng-container>
    </div>

    <br/><br/>
    <!-- !!!!!!!!!!!!!!!!  IMPORTANT  !!!!!!!!!!!!!!! -->
    <!-- when finished change [enabled] -> [disabled] -->
    <ion-button routerDirection="forward" class="click-btn" expand="block" type="submit" [enabled]="!validations_form.valid">submit</ion-button>
    <!-- !!!!!!!!!!!!!!!!  IMPORTANT  !!!!!!!!!!!!!!! -->
    
    <ion-button routerLink="/login" routerDirection="forward" class="click-btn" expand="block">back</ion-button>

   </form>
  
</ion-content>
